<div class="music-details-container">
  <!-- Show current track if available -->
  <div *ngIf="currentTrack" class="current-track">
    <div class="music-poster">
      <img (error)="onImageError($event)"
           [alt]="currentTrack.title"
           [src]="currentTrack.coverUrl || 'https://via.placeholder.com/300x300/e9ecef/6c757d?text=No+Cover'"
           class="img-fluid">
    </div>
    <div class="music-info">
      <h3>{{ currentTrack.title }}</h3>
      <h5>{{ currentTrack.artist }}</h5>
      <div *ngIf="currentTrack.duration" class="text-muted">{{ formatDuration(currentTrack.duration) }}</div>
      <div class="text-muted">Added by {{ currentTrack.addedBy }}</div>

      <!-- Download Status -->
      <div *ngIf="currentTrack.downloadStatus && currentTrack.downloadStatus !== 'completed'"
           class="download-status mt-2">
        <span [ngClass]="{
          'bg-warning': currentTrack.downloadStatus === 'pending',
          'bg-info': currentTrack.downloadStatus === 'downloading',
          'bg-danger': currentTrack.downloadStatus === 'error'
        }" class="badge">
          <span [ngSwitch]="currentTrack.downloadStatus">
            <span *ngSwitchCase="'pending'">Preparing...</span>
            <span *ngSwitchCase="'downloading'">Downloading {{ currentTrack.downloadProgress || 0 }}%</span>
            <span *ngSwitchCase="'error'">Download failed</span>
          </span>
        </span>
      </div>
    </div>
  </div>

  <!-- Show placeholder when no track is playing -->
  <div *ngIf="!currentTrack" class="no-track">
    <div class="music-poster">
      <div class="placeholder-cover">
        <lucide-icon color="#6c757d" name="music" size="64"></lucide-icon>
      </div>
    </div>
    <div class="music-info">
      <h3 class="text-muted">No Track Playing</h3>
      <h5 class="text-muted">Add a YouTube video to the queue</h5>
      <div class="text-muted">Ready to start listening together</div>
    </div>
  </div>
</div>
