<div class="queue-container">
  <div class="queue-header">
    <h3>Music Queue</h3>
    <div class="queue-info">
      <span class="queue-count">{{ queue.length }} songs</span>
    </div>
  </div>

  <div class="queue-content">
    <div *ngIf="queue.length === 0" class="empty-queue">
      <div class="empty-queue-icon">
        <lucide-icon name="music" size="48" color="#666"></lucide-icon>
      </div>
      <p class="empty-queue-text">Queue is empty</p>
      <p class="empty-queue-subtext">Songs will appear here when added</p>
    </div>    <div *ngIf="queue.length > 0" class="queue-list">
      <div 
        *ngFor="let item of queue; let i = index; trackBy: trackByQueueId" 
        class="queue-item"
        [class.current-track]="i === currentTrackIndex"
        [class.clickable]="item.downloadStatus === 'completed'"
        (click)="playTrack(i)">
        
        <div class="queue-item-thumbnail">
          <img 
            *ngIf="item.coverUrl" 
            [src]="item.coverUrl" 
            [alt]="item.title"
            class="thumbnail-img"
            (error)="onImageError($event)">
          <div 
            *ngIf="!item.coverUrl"
            class="thumbnail-placeholder">
            <lucide-icon name="music" size="16"></lucide-icon>
          </div>
          <div 
            *ngIf="i === currentTrackIndex"
            class="now-playing-indicator">
            <lucide-icon 
              name="play" 
              size="12" 
              color="#1db954">
            </lucide-icon>
          </div>
        </div>        <div class="queue-item-info">
          <div class="track-title">{{ item.title }}</div>
          <div class="track-artist">{{ item.artist }}</div>
          <div class="track-meta">
            <span class="track-duration">{{ formatDuration(item.duration) }}</span>
            <span class="track-separator">â€¢</span>
            <span class="added-by">Added by {{ item.addedBy }}</span>
            <span class="track-separator">â€¢</span>
            <span class="added-time">{{ formatTime(item.addedAt) }}</span>
            
            <!-- Source indicator -->
            <span class="track-separator" *ngIf="item.source">â€¢</span>
            <span class="source-indicator" *ngIf="item.source" [ngClass]="'source-' + item.source">
              <span *ngIf="item.source === 'spotify'">ðŸ“» Spotify</span>
              <span *ngIf="item.source === 'youtube'">ðŸ“º YouTube</span>
            </span>
            
            <!-- Download Status -->
            <span class="track-separator" *ngIf="item.downloadStatus && item.downloadStatus !== 'completed'">â€¢</span>
            <span class="download-status" *ngIf="item.downloadStatus && item.downloadStatus !== 'completed'">
              <span [ngSwitch]="item.downloadStatus">
                <span *ngSwitchCase="'pending'" class="status-pending">Preparing...</span>
                <span *ngSwitchCase="'downloading'" class="status-downloading">{{ item.downloadProgress || 0 }}%</span>
                <span *ngSwitchCase="'error'" class="status-error">Failed</span>
              </span>
            </span>
          </div>
        </div>

        <div class="queue-item-actions">
          <button 
            class="action-btn move-up" 
            (click)="moveUp(i)"
            [disabled]="i === 0"
            title="Move up">
            <lucide-icon name="chevron-up" size="16"></lucide-icon>
          </button>
          <button 
            class="action-btn move-down" 
            (click)="moveDown(i)"
            [disabled]="i === queue.length - 1"
            title="Move down">
            <lucide-icon name="chevron-down" size="16"></lucide-icon>
          </button>
          <button 
            class="action-btn remove" 
            (click)="removeFromQueue(i)"
            title="Remove from queue">
            <lucide-icon name="x" size="16"></lucide-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
